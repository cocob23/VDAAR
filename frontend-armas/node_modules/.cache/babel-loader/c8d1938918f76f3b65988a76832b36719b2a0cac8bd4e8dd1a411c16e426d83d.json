{"ast":null,"code":"import _objectSpread from\"/Users/coco/Desktop/ventadearmas/frontend-armas/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{supabase}from'./supabaseClient';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PanelAdmin(){const[armas,setArmas]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const fetchArmas=async()=>{setLoading(true);const{data,error}=await supabase.from('armas').select('*').order('fecha_creacion',{ascending:false});if(error)setError(error.message);else setArmas(data);setLoading(false);};fetchArmas();},[]);const cambiarEstado=async(id,nuevoEstado)=>{await supabase.from('armas').update({estado_publicacion:nuevoEstado}).eq('id',id);setArmas(armas=>armas.map(a=>a.id===id?_objectSpread(_objectSpread({},a),{},{estado_publicacion:nuevoEstado}):a));};const marcarVendida=async id=>{await supabase.from('armas').update({estado_publicacion:'VENDIDA'}).eq('id',id);setArmas(armas=>armas.map(a=>a.id===id?_objectSpread(_objectSpread({},a),{},{estado_publicacion:'VENDIDA'}):a));};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Cargando armas...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error});return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:900,margin:'40px auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Panel de Administraci\\xF3n\"}),armas.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No hay armas registradas.\"}),armas.map(arma=>/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ccc',padding:16,marginBottom:16},children:[/*#__PURE__*/_jsx(\"b\",{children:arma.nombre}),\" - \",arma.marca,\" \",arma.modelo,\" \",/*#__PURE__*/_jsx(\"br\",{}),\"Estado: \",/*#__PURE__*/_jsx(\"b\",{children:arma.estado_publicacion}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{children:[\"Creada: \",new Date(arma.fecha_creacion).toLocaleString()]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>cambiarEstado(arma.id,'RECHAZADA'),disabled:arma.estado_publicacion==='RECHAZADA',children:\"Rechazar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>cambiarEstado(arma.id,'PUBLICADA_SIN_CONTACTO'),disabled:arma.estado_publicacion==='PUBLICADA_SIN_CONTACTO',children:\"Publicar sin contacto\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>cambiarEstado(arma.id,'PUBLICADA_CON_CONTACTO'),disabled:arma.estado_publicacion==='PUBLICADA_CON_CONTACTO',children:\"Publicar con contacto\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>marcarVendida(arma.id),disabled:arma.estado_publicacion==='VENDIDA',children:\"Marcar como vendida\"}),/*#__PURE__*/_jsxs(\"details\",{children:[/*#__PURE__*/_jsx(\"summary\",{children:\"Ver detalles\"}),/*#__PURE__*/_jsx(\"pre\",{style:{whiteSpace:'pre-wrap',fontSize:13},children:JSON.stringify(arma,null,2)}),arma.fotos&&arma.fotos.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',gap:8,flexWrap:'wrap'},children:arma.fotos.map((url,i)=>/*#__PURE__*/_jsx(\"img\",{src:url,alt:\"foto\",width:80},i))})]})]},arma.id))]});}export default PanelAdmin;","map":{"version":3,"names":["React","useEffect","useState","supabase","jsx","_jsx","jsxs","_jsxs","PanelAdmin","armas","setArmas","loading","setLoading","error","setError","fetchArmas","data","from","select","order","ascending","message","cambiarEstado","id","nuevoEstado","update","estado_publicacion","eq","map","a","_objectSpread","marcarVendida","children","style","color","maxWidth","margin","length","arma","border","padding","marginBottom","nombre","marca","modelo","Date","fecha_creacion","toLocaleString","onClick","disabled","whiteSpace","fontSize","JSON","stringify","fotos","display","gap","flexWrap","url","i","src","alt","width"],"sources":["/Users/coco/Desktop/ventadearmas/frontend-armas/src/PanelAdmin.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { supabase } from './supabaseClient';\n\nfunction PanelAdmin() {\n  const [armas, setArmas] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const fetchArmas = async () => {\n      setLoading(true);\n      const { data, error } = await supabase\n        .from('armas')\n        .select('*')\n        .order('fecha_creacion', { ascending: false });\n      if (error) setError(error.message);\n      else setArmas(data);\n      setLoading(false);\n    };\n    fetchArmas();\n  }, []);\n\n  const cambiarEstado = async (id, nuevoEstado) => {\n    await supabase.from('armas').update({ estado_publicacion: nuevoEstado }).eq('id', id);\n    setArmas(armas => armas.map(a => a.id === id ? { ...a, estado_publicacion: nuevoEstado } : a));\n  };\n\n  const marcarVendida = async (id) => {\n    await supabase.from('armas').update({ estado_publicacion: 'VENDIDA' }).eq('id', id);\n    setArmas(armas => armas.map(a => a.id === id ? { ...a, estado_publicacion: 'VENDIDA' } : a));\n  };\n\n  if (loading) return <p>Cargando armas...</p>;\n  if (error) return <p style={{color:'red'}}>{error}</p>;\n\n  return (\n    <div style={{maxWidth:900,margin:'40px auto'}}>\n      <h2>Panel de Administraci√≥n</h2>\n      {armas.length === 0 && <p>No hay armas registradas.</p>}\n      {armas.map(arma => (\n        <div key={arma.id} style={{border:'1px solid #ccc',padding:16,marginBottom:16}}>\n          <b>{arma.nombre}</b> - {arma.marca} {arma.modelo} <br/>\n          Estado: <b>{arma.estado_publicacion}</b><br/>\n          <small>Creada: {new Date(arma.fecha_creacion).toLocaleString()}</small><br/>\n          <button onClick={() => cambiarEstado(arma.id, 'RECHAZADA')} disabled={arma.estado_publicacion==='RECHAZADA'}>Rechazar</button>\n          <button onClick={() => cambiarEstado(arma.id, 'PUBLICADA_SIN_CONTACTO')} disabled={arma.estado_publicacion==='PUBLICADA_SIN_CONTACTO'}>Publicar sin contacto</button>\n          <button onClick={() => cambiarEstado(arma.id, 'PUBLICADA_CON_CONTACTO')} disabled={arma.estado_publicacion==='PUBLICADA_CON_CONTACTO'}>Publicar con contacto</button>\n          <button onClick={() => marcarVendida(arma.id)} disabled={arma.estado_publicacion==='VENDIDA'}>Marcar como vendida</button>\n          <details>\n            <summary>Ver detalles</summary>\n            <pre style={{whiteSpace:'pre-wrap',fontSize:13}}>{JSON.stringify(arma, null, 2)}</pre>\n            {arma.fotos && arma.fotos.length > 0 && (\n              <div style={{display:'flex',gap:8,flexWrap:'wrap'}}>\n                {arma.fotos.map((url,i) => <img key={i} src={url} alt=\"foto\" width={80} />)}\n              </div>\n            )}\n          </details>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default PanelAdmin;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}