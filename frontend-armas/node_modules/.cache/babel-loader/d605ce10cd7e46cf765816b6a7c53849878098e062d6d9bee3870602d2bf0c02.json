{"ast":null,"code":"import React,{useEffect,useState}from'react';import{supabase}from'./supabaseClient';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function RequireAuth(_ref){let{children}=_ref;const[checking,setChecking]=useState(true);const[isLogged,setIsLogged]=useState(false);const navigate=useNavigate();useEffect(()=>{supabase.auth.getSession().then(_ref2=>{let{data:{session}}=_ref2;setIsLogged(!!session);setChecking(false);if(!session){setTimeout(()=>navigate('/login',{replace:true}),1000);}});},[navigate]);if(checking)return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:80,fontSize:20},children:\"Verificando sesi\\xF3n...\"});if(!isLogged)return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',marginTop:80,fontSize:20},children:[\"Debes iniciar sesi\\xF3n para publicar.\",/*#__PURE__*/_jsx(\"br\",{}),\"Redirigiendo...\"]});return children;}export default RequireAuth;","map":{"version":3,"names":["React","useEffect","useState","supabase","useNavigate","jsx","_jsx","jsxs","_jsxs","RequireAuth","_ref","children","checking","setChecking","isLogged","setIsLogged","navigate","auth","getSession","then","_ref2","data","session","setTimeout","replace","style","textAlign","marginTop","fontSize"],"sources":["C:/Users/co/Desktop/VDAAR/frontend-armas/src/RequireAuth.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { supabase } from './supabaseClient';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction RequireAuth({ children }) {\r\n  const [checking, setChecking] = useState(true);\r\n  const [isLogged, setIsLogged] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    supabase.auth.getSession().then(({ data: { session } }) => {\r\n      setIsLogged(!!session);\r\n      setChecking(false);\r\n      if (!session) {\r\n        setTimeout(() => navigate('/login', { replace: true }), 1000);\r\n      }\r\n    });\r\n  }, [navigate]);\r\n\r\n  if (checking) return <div style={{textAlign:'center',marginTop:80,fontSize:20}}>Verificando sesión...</div>;\r\n  if (!isLogged) return <div style={{textAlign:'center',marginTop:80,fontSize:20}}>Debes iniciar sesión para publicar.<br/>Redirigiendo...</div>;\r\n  return children;\r\n}\r\n\r\nexport default RequireAuth;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,QAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CAC/B,KAAM,CAACE,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAACY,QAAQ,CAAEC,WAAW,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CAC/C,KAAM,CAAAc,QAAQ,CAAGZ,WAAW,CAAC,CAAC,CAE9BH,SAAS,CAAC,IAAM,CACdE,QAAQ,CAACc,IAAI,CAACC,UAAU,CAAC,CAAC,CAACC,IAAI,CAACC,KAAA,EAA2B,IAA1B,CAAEC,IAAI,CAAE,CAAEC,OAAQ,CAAE,CAAC,CAAAF,KAAA,CACpDL,WAAW,CAAC,CAAC,CAACO,OAAO,CAAC,CACtBT,WAAW,CAAC,KAAK,CAAC,CAClB,GAAI,CAACS,OAAO,CAAE,CACZC,UAAU,CAAC,IAAMP,QAAQ,CAAC,QAAQ,CAAE,CAAEQ,OAAO,CAAE,IAAK,CAAC,CAAC,CAAE,IAAI,CAAC,CAC/D,CACF,CAAC,CAAC,CACJ,CAAC,CAAE,CAACR,QAAQ,CAAC,CAAC,CAEd,GAAIJ,QAAQ,CAAE,mBAAON,IAAA,QAAKmB,KAAK,CAAE,CAACC,SAAS,CAAC,QAAQ,CAACC,SAAS,CAAC,EAAE,CAACC,QAAQ,CAAC,EAAE,CAAE,CAAAjB,QAAA,CAAC,0BAAqB,CAAK,CAAC,CAC3G,GAAI,CAACG,QAAQ,CAAE,mBAAON,KAAA,QAAKiB,KAAK,CAAE,CAACC,SAAS,CAAC,QAAQ,CAACC,SAAS,CAAC,EAAE,CAACC,QAAQ,CAAC,EAAE,CAAE,CAAAjB,QAAA,EAAC,wCAAmC,cAAAL,IAAA,QAAI,CAAC,kBAAe,EAAK,CAAC,CAC9I,MAAO,CAAAK,QAAQ,CACjB,CAEA,cAAe,CAAAF,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}